#!/bin/bash

BUILD_TYPE=RELEASE

BASE_DIR=/opt/trilinos/source

INSTALL_DIR=/opt/trilinos/install

rm -rf CMake*

cmake \
	-W no-dev \
	-D CMAKE_BUILD_TYPE:STRING=$TYPE \
	-D CMAKE_INSTALL_PREFIX:STRING=$INSTALL_DIR \
	-D CMAKE_C_FLAGS:STRING="-DH5_HAVE_PARALLEL -DSHYLU_NODEBASKER" \
	-D CMAKE_CXX_FLAGS:STRING="-DH4_HAVE_PARALLEL -DSHYLU_NODEBASKER" \
	-D MPI_EXEC_MAX_NUMPROCS:STRING=8 \
	-D Trilinos_ENABLE_Fortran:BOOL=ON \
	-D BUILD_SHARED_LIBS:BOOL=OFF \
	-D CMAKE_VERBOSE_MAKEFILE:BOOL=OFF \
  -D Trilinos_ENABLE_TESTS:BOOL=OFF \
  -D Trilinos_ENABLE_EXAMPLES:BOOL=OFF \
	-D Trilinos_ASSERT_MISSING_PACKAGES:BOOL=ON \
	-D Trilinos_ENABLE_ALL_PACKAGES:BOOL=OFF \
	-D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=OFF \
	-D Trilinos_ENABLE_CHECKED_STL:BOOL=OFF \
	-D Trilinos_ENABLE_EXPLICIT_INSTANTIATION:BOOL=ON \
	-D Trilinos_VERBOSE_CONFIGURE:BOOL=OFF \
	-D Trilinos_ENABLE_Amesos:BOOL=ON \
	-D Amesos_ENABLE_KLU:BOOL=ON \
	-D Trilinos_ENABLE_Amesos2:BOOL=ON \
	-D Anasazi_ENABLE_RBGen:BOOL=ON \
	-D Amesos2_ENABLE_KLU2:BOOL=ON \
	-D Amesos2_ENABLE_Basker:BOOL=OFF \
	-D Amesos2_ENABLE_TIMERS:BOOL=ON \
	-D Amesos2_ENABLE_TESTS:BOOL=OFF \
	-D Amesos2_ENABLE_EXAMPLES:BOOL=OFF \
	-D Trilinos_ENABLE_AztecOO:BOOL=ON \
	-D Trilinos_ENABLE_Belos:BOOL=ON \
	-D Trilinos_ENABLE_Epetra:BOOL=ON \
	-D Epetra_ENABLE_TESTS:BOOL=OFF \
	-D Tpetra_ENABLE_TESTS:BOOL=OFF \
	-D Trilinos_ENABLE_EpetraExt:BOOL=ON \
	-D EpetraExt_ENABLE_TESTS:BOOL=OFF \
	-D Trilinos_ENABLE_FEI:BOOL=OFF \
	-D Trilinos_ENABLE_Galeri:BOOL=ON \
	-D Trilinos_ENABLE_GlobiPack:BOOL=OFF \
	-D Trilinos_ENABLE_Ifpack:BOOL=ON \
	-D Trilinos_ENABLE_Ifpack2:BOOL=ON \
	-D Ifpack2_ENABLE_TESTS:BOOL=OFF \
	-D Trilinos_ENABLE_Intrepid2:BOOL=OFF \
	-D Trilinos_ENABLE_Isorropia:BOOL=ON \
	-D Trilinos_ENABLE_Kokkos:BOOL=ON \
	-D Kokkos_ENABLE_Serial:BOOL=ON \
	-D Kokkos_ENABLE_OpenMP:BOOL=OFF \
	-D Kokkos_ENABLE_Pthread:BOOL=OFF \
	-D Kokkos_ENABLE_TESTS:BOOL=OFF \
	-D Trilinos_ENABLE_KokkosCore:BOOL=ON \
	-D Trilinos_ENABLE_MiniTensor:BOOL=OFF \
	-D Trilinos_ENABLE_ML:BOOL=ON \
	-D ML_ENABLE_EXAMPLES:BOOL=OFF \
	-D ML_ENABLE_TESTS:BOOL=OFF \
	-D Trilinos_ENABLE_MOOCHO:BOOL=OFF \
	-D Trilinos_ENABLE_MueLu:BOOL=OFF \
	-D Trilinos_ENABLE_NOX:BOOL=ON \
	-D NOX_ENABLE_ABSTRACT_IMPLEMENTATION_EPETRA:BOOL=ON \
	-D Trilinos_ENABLE_OptiPack:BOOL=OFF \
	-D Trilinos_ENABLE_Pamgen:BOOL=OFF \
	-D Trilinos_ENABLE_Phalanx:BOOL=OFF \
	-D Trilinos_ENABLE_Piro:BOOL=OFF \
	-D Trilinos_ENABLE_ROL:BOOL=OFF \
	-D Trilinos_ENABLE_Rythmos:BOOL=OFF \
	-D Trilinos_ENABLE_Sacado:BOOL=OFF \
	-D Trilinos_ENABLE_SCOREC:BOOL=OFF \
	-D Trilinos_ENABLE_SEACAS:BOOL=OFF \
	-D Trilinos_ENABLE_SEACASIoss:BOOL=ON \
	-D Trilinos_ENABLE_SEACASExodus:BOOL=ON \
	-D Trilinos_ENABLE_Shards:BOOL=OFF \
	-D Trilinos_ENABLE_ShyLU:BOOL=ON \
	-D Trilinos_ENABLE_ShyLU_Node:BOOL=ON \
	-D Trilinos_ENABLE_ShyLU_NodeFastILU:BOOL=OFF \
	-D Trilinos_ENABLE_ShyLU_DD:BOOL=ON \
	-D ShyLU_DD_ENABLE_TESTS:BOOL=OFF \
	-D ShyLU_DD_ENABLE_EXAMPLES:BOOL=OFF \
	-D Trilinos_ENABLE_ShyLU_DDBDDC:BOOL=ON \
	-D Trilinos_ENABLE_ShyLU_DDCore:BOOL=ON \
	-D Trilinos_ENABLE_ShyLU_DDFROSch:BOOL=ON \
	-D Trilinos_ENABLE_STK:BOOL=OFF \
	-D Trilinos_ENABLE_STKSearchUtil:BOOL=OFF \
	-D Trilinos_ENABLE_STKUnit_tests:BOOL=OFF \
	-D Trilinos_ENABLE_STKDoc_tests:BOOL=OFF \
	-D Trilinos_ENABLE_Stokhos:BOOL=OFF \
	-D Trilinos_ENABLE_Stratimikos:BOOL=ON \
	-D Stratimikos_ENABLE_TEUCHOS_TIME_MONITOR:BOOL=ON \
	-D Trilinos_ENABLE_Teko:BOOL=ON \
	-D Trilinos_ENABLE_Tempus:BOOL=OFF \
	-D Trilinos_ENABLE_Teuchos:BOOL=ON \
	-D Trilinos_ENABLE_TeuchosRemainder:BOOL=ON \
	-D Trilinos_ENABLE_Thyra:BOOL=ON \
	-D Trilinos_ENABLE_Tpetra:BOOL=ON \
	-D Tpetra_ASSUME_GPU_AWARE_MPI:BOOL=FALSE \
	-D Tpetra_INST_SERIAL:BOOL=ON \
	-D Tpetra_INST_OPENMP:BOOL=OFF \
	-D Tpetra_ENABLE_Kokkos_Refactor:BOOL=ON \
	-D Trilinos_ENABLE_TriKota:BOOL=OFF \
	-D Trilinos_ENABLE_Zoltan:BOOL=ON \
	-D Zoltan_ENABLE_ULONG_IDS:BOOL=ON \
	-D Trilinos_ENABLE_Zoltan2:BOOL=ON \
	-D Zoltan2_ENABLE_EXAMPLES:BOOL=OFF \
	-D TPL_ENABLE_LAPACK:BOOL=ON \
	-D Trilinos_ENABLE_OpenMP:BOOL=OFF \
	-D TPL_ENABLE_Matio:BOOL=OFF \
	-D TPL_ENABLE_MPI:BOOL=ON \
	-D TPL_ENABLE_METIS:BOOL=ON \
	-D TPL_ENABLE_BLAS:BOOL=ON \
	-D TPL_ENABLE_ParMETIS:BOOL=ON \
	-D TPL_ENABLE_UMFPACK:BOOL=ON \
-D TPL_ENABLE_UMFPACK:BOOL=ON \
  -D UMFPACK_LIBRARY_NAMES:STRING="umfpack;amd;suitesparseconfig" \
  -D UMFPACK_LIBRARY_DIRS:PATH="/usr/lib/aarch64-linux-gnu/" \
  -D UMFPACK_INCLUDE_DIRS:PATH="/usr/include/suitesparse/" \
-D TPL_ENABLE_AMD:BOOL=ON \
  -D AMD_LIBRARY_NAMES:STRING="amd;suitesparseconfig" \
  -D AMD_LIBRARY_DIRS:PATH="/usr/lib/aarch64-linux-gnu/" \
  -D AMD_INCLUDE_DIRS:PATH="/usr/include/suitesparse/" \
	-D TPL_ENABLE_Boost:BOOL=ON \
	-D EpetraExt_USING_HDF5:BOOL=ON \
	-D TPL_ENABLE_HDF5:BOOL=ON \
	-D Trilinos_ENABLE_CONFIGURE_TIMING=ON \
	-D Trilinos_ENABLE_PACKAGE_CONFIGURE_TIMING=ON \
	$BASE_DIR
